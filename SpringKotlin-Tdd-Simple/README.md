# Spring Kotlin으로 TDD 연습하기

- TDD를 Kotlin으로 적용 해 보고자 한다
- Repository -> Service -> Controller 순서로 개발을 진행한다.
- Repository 계층의 테스트는 H2와 같은 인메모리 데이터베이스 기반의 통합 테스트로 진행한다.
- Service 계층의 테스트는 Mockito를 사용해 Repository 계층을 Mock하여 진행한다.
- Controller 계층의 테스트는 SpringTest의 MockMvc를 사용해 진행한다.


## 요구사항 분석
- 요구사항이 있어야 테스트코드를 작성한다
- 테스트코드를 가지고 기초적인 뼈대와 흐름을 파악/작성

### Problem Solve
- 할인을 선택적으로 할 수 있는 카드를 만들고자한다
- 선택적으로 할인을 할 수 있어야 하기 때문에 제휴사 연결, 나의 제휴사 조회, 제휴사 포인트 조회 기능이 있어야 한다
- 간단한 어플리케이션이기 때문에 사용자 식별값은 임의의 uuid를 사용한다

### 요구사항 구현 - 상세 기술정리
- 나의 할인 제휴사 등록하기
    - 카드를 사용 할 때 할인받을 제휴사를 등록합니다
    - request: 사용자 uuid, 제휴사 이름
    - response: 제휴 id
- 나의 할인 전체/특정제휴사 조회하기
    - 카드를 사용 할 때 할인받을 제휴사를 조회합니다
    - request: 사용자 uuid
    - response: 제휴사 이름, 할인 포인트의 리스트
- 나의 할인 제휴사 포인트 적립하기
    - 카드를 사용 할 때 선택 한 제휴사 1곳에 포인트를 적립합니다
    - request: 사용자 uuid, 제휴 id, 사용금액
    - response: 보유한 제휴사 이름, 할인 포인트의 리스트
- 나의 할인 제휴사 포인트 조회하기
    - 등록한 제휴사에 저장 된 포인트를 조회합니다
    - request: 사용자 uuid, 제휴 id
    - response: 제휴사 이름, 포인트
- 나의 할인 제휴사 포인트 차감
    - 카드를 사용 할 때 선택 한 제휴사 1곳에 포인트를 차감합니다
    - request: 사용자 uuid, 제휴 id
    - response: 제휴사 이름, 할인 포인트의 리스트
- 나의 할인 제휴사 삭제하기
    - 카드를 사용 할 때 할인받을 제휴사를 삭제합니다
    - request: 사용자 uuid, 제휴 id
    - response: 보유한 제휴사 이름, 할인 포인트의 리스트
